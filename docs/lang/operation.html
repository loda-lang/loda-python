<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>loda.lang.operation API documentation</title>
<meta name="description" content="Operation model and serialization.">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>loda.lang.operation</code></h1>
</header>
<section id="section-intro">
<p>Operation model and serialization.</p>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="loda.lang.operation.Operation"><code class="flex name class">
<span>class <span class="ident">Operation</span></span>
<span>(</span><span>*args)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Operation:
    &#34;&#34;&#34;
    Operations have the following structure: `&lt;type&gt; &lt;target&gt;,&lt;source&gt; ; &lt;comment&gt;`
    where the operation type is an enum consisting of three-letter operation names, and
    target and source are `loda.lang.operand.Operand`s. Depending on their type, 
    operations may have no target/source operands. Note that the _first_ operand
    is the target, and the _second_ is the source, which is analogous to the 
    [Intel assembly syntax](https://en.wikipedia.org/wiki/X86_assembly_language).
    Comments are optional strings separated from the rest of the operation using a colon.

    The target operand can be a direct or indirect memory access, but never a constant.
    There are no type restrictions for the source operand. In terms of execution semantics,
    operations may update the content of the target memory cell, but the source is always read only.
    The precise execution semantics of all operations is defined in the
    [Language Specification](https://loda-lang.github.io/spec)
    and implemented in `loda.runtime` package.

    **Example**
    &gt;&gt;&gt; # Example operands:
    &gt;&gt;&gt; target = Operand(&#34;$1&#34;)
    &gt;&gt;&gt; source = Operand(&#34;5&#34;)
    &gt;&gt;&gt;
    &gt;&gt;&gt; # Constructing operations using explicit values:
    &gt;&gt;&gt; print(Operation(Operation.Type.MOV, target, source))
    mov $1,5
    &gt;&gt;&gt;
    &gt;&gt;&gt; print(Operation(Operation.Type.ADD, target, source, &#34;some comment&#34;))
    add $1,5 ; some comment
    &gt;&gt;&gt;
    &gt;&gt;&gt; # Constructing operations from their string representations:
    &gt;&gt;&gt; print(Operation(&#34;sub $2,7&#34;))
    sub $2,7
    &gt;&gt;&gt; print(Operation(&#34;div $3,$5 ; some comment&#34;))
    div $3,$5 ; some comment
    &#34;&#34;&#34;

    class Type(Enum):
        &#34;&#34;&#34;Operation type. Type names are written as three-letter, lower-case words.&#34;&#34;&#34;
        NOP = 1     # no operation
        MOV = 2     # assignment
        ADD = 3     # addition
        SUB = 4     # subtraction
        TRN = 5     # truncated subtraction
        MUL = 6     # multiplication
        DIV = 7     # division
        DIF = 8     # conditional division
        MOD = 9     # modulo
        POW = 10    # power
        GCD = 11    # greatest common divisor
        BIN = 12    # binomial coefficient
        EQU = 13    # equality
        NEQ = 14    # inequality
        LEQ = 15    # less or equal
        GEQ = 16    # greater or equal
        MIN = 17    # minimum
        MAX = 18    # maximum
        LPB = 19    # loop begin
        LPE = 20    # loop end
        CLR = 21    # clear
        SEQ = 22    # sequence
        DBG = 23    # debug

    type: Type
    &#34;&#34;&#34;Type of this operation.&#34;&#34;&#34;

    target: Operand
    &#34;&#34;&#34;Target operand.&#34;&#34;&#34;

    source: Operand
    &#34;&#34;&#34;Source operand.&#34;&#34;&#34;

    comment: str
    &#34;&#34;&#34;Optional comment.&#34;&#34;&#34;

    def __init__(self, *args):
        if len(args) == 0:
            self.type = Operation.Type.NOP
            self.target = Operand()
            self.source = Operand()
            self.comment = None
        elif len(args) == 1:
            # parse operation
            s = args[0].strip()
            # extract comment
            i = s.find(&#34;;&#34;)
            if i &gt;= 0:
                self.comment = s[i+1:].strip()
                s = s[0:i].strip()
            else:
                self.comment = None
            if s:
                # parse operation type
                t = s.split()[0]
                self.type = Operation.Type[t.upper()]
                s = s[len(t):].strip()
                # parse arguments
                a = s.split(&#34;,&#34;)
                self.target = Operand()
                self.source = Operand()
                if len(a) &gt; 0 and s:
                    self.target = Operand(a[0])
                if len(a) &gt; 1:
                    self.source = Operand(a[1])
                elif self.type == Operation.Type.LPB:
                    self.source = Operand(Operand.Type.CONSTANT, 1)
            else:
                self.type = Operation.Type.NOP
                self.target = Operand()
                self.source = Operand()
        elif len(args) == 3:
            self.type = args[0]
            self.target = args[1]
            self.source = args[2]
            self.comment = None
        elif len(args) == 4:
            self.type = args[0]
            self.target = args[1]
            self.source = args[2]
            self.comment = args[3]

    def __eq__(self, o: object) -&gt; bool:
        # Note: we ignore comments in equality checks.
        return self.type == o.type and self.target == o.target and \
            self.source == o.source

    def __str__(self) -&gt; str:
        type_str = self.type.name.lower()
        if self.type == Operation.Type.NOP:
            r = &#34;&#34;
        elif self.type == Operation.Type.LPB and self.source == Operand(Operand.Type.CONSTANT, 1):
            r = &#34;{} {}&#34;.format(type_str, self.target)
        elif self.type == Operation.Type.LPE:
            r = type_str
        else:
            r = &#34;{} {},{}&#34;.format(type_str, self.target, self.source)
        if self.comment:
            if r:
                r += &#34; &#34;
            r += &#34;; {}&#34;.format(self.comment)
        return r</code></pre>
</details>
<div class="desc"><p>Operations have the following structure: <code>&lt;type&gt; &lt;target&gt;,&lt;source&gt; ; &lt;comment&gt;</code>
where the operation type is an enum consisting of three-letter operation names, and
target and source are <code><a title="loda.lang.operand.Operand" href="operand.html#loda.lang.operand.Operand">Operand</a></code>s. Depending on their type,
operations may have no target/source operands. Note that the <em>first</em> operand
is the target, and the <em>second</em> is the source, which is analogous to the
<a href="https://en.wikipedia.org/wiki/X86_assembly_language">Intel assembly syntax</a>.
Comments are optional strings separated from the rest of the operation using a colon.</p>
<p>The target operand can be a direct or indirect memory access, but never a constant.
There are no type restrictions for the source operand. In terms of execution semantics,
operations may update the content of the target memory cell, but the source is always read only.
The precise execution semantics of all operations is defined in the
<a href="https://loda-lang.github.io/spec">Language Specification</a>
and implemented in <code><a title="loda.runtime" href="../runtime/index.html">loda.runtime</a></code> package.</p>
<p><strong>Example</strong></p>
<pre><code class="language-python-repl">&gt;&gt;&gt; # Example operands:
&gt;&gt;&gt; target = Operand(&quot;$1&quot;)
&gt;&gt;&gt; source = Operand(&quot;5&quot;)
&gt;&gt;&gt;
&gt;&gt;&gt; # Constructing operations using explicit values:
&gt;&gt;&gt; print(Operation(Operation.Type.MOV, target, source))
mov $1,5
&gt;&gt;&gt;
&gt;&gt;&gt; print(Operation(Operation.Type.ADD, target, source, &quot;some comment&quot;))
add $1,5 ; some comment
&gt;&gt;&gt;
&gt;&gt;&gt; # Constructing operations from their string representations:
&gt;&gt;&gt; print(Operation(&quot;sub $2,7&quot;))
sub $2,7
&gt;&gt;&gt; print(Operation(&quot;div $3,$5 ; some comment&quot;))
div $3,$5 ; some comment
</code></pre></div>
<h3>Class variables</h3>
<dl>
<dt id="loda.lang.operation.Operation.Type"><code class="name">var <span class="ident">Type</span></code></dt>
<dd>
<div class="desc"><p>Operation type. Type names are written as three-letter, lower-case words.</p></div>
</dd>
<dt id="loda.lang.operation.Operation.comment"><code class="name">var <span class="ident">comment</span> : str</code></dt>
<dd>
<div class="desc"><p>Optional comment.</p></div>
</dd>
<dt id="loda.lang.operation.Operation.source"><code class="name">var <span class="ident">source</span> : <a title="loda.lang.operand.Operand" href="operand.html#loda.lang.operand.Operand">Operand</a></code></dt>
<dd>
<div class="desc"><p>Source operand.</p></div>
</dd>
<dt id="loda.lang.operation.Operation.target"><code class="name">var <span class="ident">target</span> : <a title="loda.lang.operand.Operand" href="operand.html#loda.lang.operand.Operand">Operand</a></code></dt>
<dd>
<div class="desc"><p>Target operand.</p></div>
</dd>
<dt id="loda.lang.operation.Operation.type"><code class="name">var <span class="ident">type</span> : <a title="loda.lang.operation.Operation.Type" href="#loda.lang.operation.Operation.Type">Operation.Type</a></code></dt>
<dd>
<div class="desc"><p>Type of this operation.</p></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="loda.lang" href="index.html">loda.lang</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="loda.lang.operation.Operation" href="#loda.lang.operation.Operation">Operation</a></code></h4>
<ul class="">
<li><code><a title="loda.lang.operation.Operation.Type" href="#loda.lang.operation.Operation.Type">Type</a></code></li>
<li><code><a title="loda.lang.operation.Operation.comment" href="#loda.lang.operation.Operation.comment">comment</a></code></li>
<li><code><a title="loda.lang.operation.Operation.source" href="#loda.lang.operation.Operation.source">source</a></code></li>
<li><code><a title="loda.lang.operation.Operation.target" href="#loda.lang.operation.Operation.target">target</a></code></li>
<li><code><a title="loda.lang.operation.Operation.type" href="#loda.lang.operation.Operation.type">type</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
